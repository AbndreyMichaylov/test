Тестовое задание для Фабрики решений
====================================
-----------------------------------
### Деплой приложения
Сначала нужно клонировать репозиторий с GitHub
```git
git clone https://github.com/AbndreyMichaylov/test
```
Затем нужно открыть папку проекта, активировать среду, после активации перейти в папку проекта и запустить его локально
```bash
cd env/scripts
activate
cd ..
cd ..
cd test2
manage.py runserver
```
Локальный адрес выглядит так
```
http://127.0.0.1:8000/
```
----------------------------
### Админ панель
Адрес админ панели выглядит так
```
http://127.0.0.1:8000/admin
```
Логин и пароль от админ панели
```
login : andrey
password : andrey
```
Админ панель выглядит следующим образом

![image](https://user-images.githubusercontent.com/48345409/113225076-74a9ce80-9295-11eb-8f9a-0031d9eafe57.png)

Схема базы данных

![cheema](https://user-images.githubusercontent.com/48345409/113225901-80969000-9297-11eb-9ff5-2bd06d8f88be.png)

----------------------------
В система изначально присутсвует 2 пользователя, kirill, dmitriy, их данные представленны ниже:
```
kirill
login : kirill
password : EVQJdsEJyvzM
dmitriy
login : dmitriy
password : OQG61{6V1ice
```
Взаимодействие с api проходит по следующему алгоритму:
1. Получение токена
2. Получение списка опросов
3. Прохождение опроса
4. Получение списка пройденных опросов

### 1. Получение токена
Что бы получить токен нужно отправить POST запрос следующему адресу:
```
http://127.0.0.1:8000/api/v1/auth/token/login
```
В теле запроса передать следующий json(пример будет на пользователе dmitriy):
```json
{
  "password" : "OQG61{6V1ice",
  "username" : "dmitriy"
}
```
В ответ придет следующий json:
```json
{
    "auth_token": "ef09348ec16055328fcb5db70cb84079f03d6585"
}
```
`!!!Данный токен требуется сохранить и отправлять в заголовке каждого запроса!!!`, формат передачи показан ниже:
```json
"Authorization" : "Token ef09348ec16055328fcb5db70cb84079f03d6585"
```
### 2. Получение списка опросов
Для получения опросов нужно отправить GET запрос по следующему адресу:
```
http://127.0.0.1:8000/api/v1/survey/all
```
В ответ придет следующий json:
```json
[
    {
        "id": 11,
        "questions": [
            "Как вас зовут?",
            "Как ваши дела?",
            "Сколько вам лет?"
        ],
        "name": "Общий опросик",
        "date_start": "2021-03-31T20:45:16Z",
        "date_end": null,
        "desc": "Опрос"
    },
    {
        "id": 41,
        "questions": [
            "Куда поедете летом?"
        ],
        "name": "Куда вы поедете летом?",
        "date_start": "2021-03-31T22:38:27Z",
        "date_end": null,
        "desc": "Опрос про море"
    }
]
```
Из полученного json требуется запомнить id опроса и сами вопросы.
### 3. Прохождение опроса
Для прохождения опроса нужно отправить POST запрос по следующему адресу:
```
http://127.0.0.1:8000/api/v1/survey/start/
```
В теле передать следующий json, где answer - это ответы(строка), а survey - опрос(идентификатор опроса полученный выше, целое число)
```json
{
  "answer" : "На море",
  "survey" : 41
}
```
Если опрос с указанным идентификатором существует, в ответ придет следующее сообщение и ответы сохраняться:
```json
{"ok":"\"ok\""}
```
### 4.Получение списка пройденных опросов
Для получения списка пройденных опросов требуется отправить GET запрос следующему адресу:
```
http://127.0.0.1:8000/api/v1/surveys/ended/all
```
В ответ придет конструкция имеющая следующий вид:
```json
{
    "surveys": [
        {
            "id": 1,
            "survey": 39,
            "answer": "Dima"
        },
        {
            "id": 2,
            "survey": 40,
            "answer": "Dima"
        },
        {
            "id": 3,
            "survey": 42,
            "answer": "На море"
        }
    ]
}
```
